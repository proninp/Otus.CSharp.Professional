# 26. Рефлексия и её применение

## Цель:

Написать свой класс-сериализатор данных любого типа в формат CSV, сравнение его быстродействия с типовыми механизмами серализации.
Полезно для изучения возможностей Reflection, а может и для применения данного класса в будущем.

## Описание/Пошаговая инструкция выполнения домашнего задания:

**Основное задание:**

1. Написать сериализацию свойств или полей класса в строку
2. Проверить на классе: `class F { int i1, i2, i3, i4, i5; Get() => new F(){ i1 = 1, i2 = 2, i3 = 3, i4 = 4, i5 = 5 }; }`
3. Замерить время до и после вызова функции (для большей точности можно сериализацию сделать в цикле 100-100000 раз)
4. Вывести в консоль полученную строку и разницу времен
5. Отправить в чат полученное время с указанием среды разработки и количества итераций
6. Замерить время еще раз и вывести в консоль сколько потребовалось времени на вывод текста в консоль
7. Провести сериализацию с помощью каких-нибудь стандартных механизмов (например в JSON)
8. И тоже посчитать время и прислать результат сравнения
9. Написать десериализацию/загрузку данных из строки (ini/csv-файла) в экземпляр любого класса
10. Замерить время на десериализацию
11. Общий результат прислать в чат с преподавателем в системе в таком виде:

Сериализуемый класс: `class F { int i1, i2, i3, i4, i5;}`
код сериализации-десериализации: ...
количество замеров: 1000 итераций
мой рефлекшен:
Время на сериализацию = 100 мс
Время на десериализацию = 100 мс
стандартный механизм (NewtonsoftJson):
Время на сериализацию = 100 мс
Время на десериализацию = 100 мс

## Критерии оценки:

5 баллов: 1-5 пункты
2 балла: 6-8 пункты
2 балла: 9-11 пункты
1 балл: CodeStyle, грамотная архитектура, всё замечания проверяющего исправлены

Минимальное количество баллов для сдачи: 6


## Решение

```bash
Исходный объект: { I1 = 1, I2 = 2, D1 = 3, Dec4 = 4, Ch1 = C, S1 = FooBar }
Reflection сериализация: {I1: 1, I2: 2, D1: 3, Dec4: 4, Ch1: C, S1: FooBar}
Время reflection сериализации: 1214,00 мкс

JSON сериализация: {"Ch1":"C","S1":"FooBar"}
Время JSON сериализации: 31314,60 мкс

Reflection десериализация: { I1 = 1, I2 = 2, D1 = 3, Dec4 = 4, Ch1 = C, S1 = FooBar }
Время reflection десериализации: 22999,30 мкс

JSON десериализация: { I1 = 0, I2 = 0, D1 = 0, Dec4 = 0, Ch1 = C, S1 = FooBar }
Время JSON десериализации: 3289,30 мкс
```

**Результаты Benchmark.NET**

BenchmarkDotNet v0.15.2, Windows 11
.NET SDK 8.0.404
  [Host]     : .NET 8.0.14 (8.0.1425.11118), X64 RyuJIT AVX2
  Job-JDKDCE : .NET 8.0.14 (8.0.1425.11118), X64 RyuJIT AVX2

IterationCount=100  WarmupCount=2  

 Method                    | Mean       | Error   | Allocated |
-------------------------- |-----------:|--------:|----------:|
 ReflectionSerialization   |   447.7 ns | 4.30 ns |     848 B |
 JsonSerialization         |   210.1 ns | 0.25 ns |      72 B |
 ReflectionDeserialization | 1,547.8 ns | 9.27 ns |    2176 B |
 JsonDeserialization       |   307.7 ns | 2.33 ns |     104 B |
